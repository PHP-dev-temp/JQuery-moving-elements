function createwt(){$("#wt-wrapper").html('<div id="wt-container"></div><button id="wt-big">Add big</button><button id="wt-small">Add small</button></div>')}function newwt(){$("#wt-wrapper").html('<h2>New</h2> \t\t<input type="number" id="wt-width" name="wt-width" placeholder="Enter width (m)" max="100" min="5" required /> \t\t<input type="number" id="wt-height" name="wt-height" placeholder="Enter height (m)" max="100" min="5" required /> \t\t<input type="submit" id="wt-submit" value="Submit"> \t\t<p></p> \t')}function gridcalculate(t,e){return grid=(t/e).toFixed(2),grid}function doResize(t){return t[0]?($("#wt-container").responsive(t[0].wtmeterw,t[0].wtmeterh),wtgrid=gridcalculate($("#wt-container").width(),t[0].wtmeterw),$("#wt-container").find("[id^=element]").each(function(){elementId=$(this).attr("id"),elementId.length&&0==elementId.indexOf("element-")&&(elementId=elementId.slice(8),$(this).responsiveElement(t[elementId],wtgrid))}),wtgrid):0}jQuery.fn.startwt=function(){$(this).html('<div id="wt-wrapper"><button id="new-wt">New</button><button id="open-wt">Open</button></div>')},jQuery.fn.dragelement=function(){var t,e,i,n,r,d,w,o=$(this),m=o.parent();return o.bind("mousedown",function(a){if(1==a.which){t=o.width(),e=o.height(),i=m.width(),n=m.height();var l=m.offset(),h=o.offset();r=a.pageX-h.left+l.left,d=a.pageY-h.top+l.top,w=!0}}),$(document).bind("mousemove",function(m){if(w){var a=i-t,l=n-e,h=m.pageX,p=m.pageY,s=h-r,u=p-d;s<0&&(s=0),u<0&&(u=0),s>a&&(s=a),u>l&&(u=l),o.css("top",u+"px"),o.css("left",s+"px")}}),$(window).bind("mouseup",function(t){w=!1}),this},jQuery.fn.responsive=function(t,e){thistarget=$(this),targetw=thistarget.width(),grid=gridcalculate(targetw,t),targeth=(e*grid).toString()+"px",thistarget.css({"background-size":grid.toString()+"px, "+grid.toString()+"px"}).height(targeth)},jQuery.fn.responsiveElement=function(t,e){thistarget=$(this),targetw=(t.wtmeterw*e).toFixed(1).toString()+"px",targeth=(t.wtmeterh*e).toFixed(1).toString()+"px",thistarget.width(targetw).height(targeth),targettop=(t.topm*e).toFixed(1).toString()+"px",targetleft=(t.leftm*e).toFixed(1).toString()+"px",thistarget.css({top:targettop,left:targetleft})},$(document).ready(function(){var t,e=0,i=[];$("#wt").startwt(),$(document).on("click","#new-wt",function(){newwt()}),$(document).on("click","#wt-submit",function(){wtw=$("#wt-width").val(),wth=$("#wt-height").val(),wtw<5||wth<5||wtw>100||wth>100?$("#wt-wrapper>p").text("Please enter value between 5 and 100 (m)."):(i.push({wtmeterh:wth,wtmeterw:wtw,type:"wt",id:e}),e++,createwt(),$("#wt-container").responsive(wtw,wth),t=gridcalculate($("#wt-container").width(),i[0].wtmeterw))}),$(window).resize(function(){wtgridtemp=doResize(i),wtgridtemp&&(t=wtgridtemp)}),$(document).on("mouseover","[id^=element]",function(){$(this).dragelement()}),$(document).on("mouseup","[id^=element]",function(){wtel=$(this),elementid=wtel.attr("id"),elementid.length&&0==elementid.indexOf("element-")&&(elementid=elementid.slice(8),i[elementid].topm=(parseInt(wtel.css("top"))/t).toFixed(1),i[elementid].leftm=(parseInt(wtel.css("left"))/t).toFixed(1))}),$(document).on("click","#wt-big",function(){$("#wt-container").append('<div id="element-'+e.toString()+'" class="big" style="width: '+(.8*t).toFixed(1).toString()+"px; height: "+(1.6*t).toFixed(1).toString()+'px"></div>'),i.push({wtmeterh:1.6,wtmeterw:.8,type:"table",id:e,topm:0,leftm:0}),e++}),$(document).on("click","#wt-small",function(){$("#wt-container").append('<div id="element-'+e.toString()+'" class="small" style="width: '+(.6*t).toFixed(1).toString()+"px; height: "+(.6*t).toFixed(1).toString()+'px"></div>'),i.push({wtmeterh:.6,wtmeterw:.6,type:"table",id:e,topm:0,leftm:0}),e++})});